<div class="rooms-page">
  <header class="page-header">
    <h1>Nuestras Habitaciones</h1>
    <p>Explora todas nuestras opciones de alojamiento</p>
  </header>

  <section class="rooms-section">
    <div class="loading-message" *ngIf="isLoading">
      <p>â³ Cargando habitaciones...</p>
    </div>

    <div class="rooms-grid" *ngIf="!isLoading">
      <div *ngFor="let room of allRooms" class="room-card" 
           [class.featured]="isCheapestOfType(room.id)"
           [class.recommended]="hasMostAmenities(room.id)">
        
        <!-- Si tiene AMBOS: mostrar badge Premium especial -->
        <div class="badges-container premium" *ngIf="isCheapestOfType(room.id) && hasMostAmenities(room.id)">
          <div class="featured-badge premium-badge">
            â­ Premium - Mejor OpciÃ³n
          </div>
        </div>
        
        <!-- Si tiene solo uno o el otro: mostrar badges normales -->
        <div class="badges-container" *ngIf="!(isCheapestOfType(room.id) && hasMostAmenities(room.id))">
          <div class="featured-badge best-price" *ngIf="isCheapestOfType(room.id)">
            ğŸ’ Mejor Precio
          </div>
          <div class="featured-badge recommended" *ngIf="hasMostAmenities(room.id)">
            ğŸŒŸ Recomendado
          </div>
        </div>
        
        <!-- Imagen de la habitaciÃ³n -->
        <div class="room-image">
          <img 
            [src]="'https://images.unsplash.com/photo-' + getRoomImageId(room.description) + '?w=600&h=400&fit=crop&q=80'" 
            [alt]="room.description"
            (error)="onImageError($event)"
            loading="lazy">
        </div>
        
        <div class="room-header">
          <h3>{{ room.description }}</h3>
          <p class="room-number" *ngIf="room.name">HabitaciÃ³n {{ room.name }}</p>
        </div>
        
        <div class="room-details">
          <div class="price-tag">
            <span class="currency">$</span>
            <span class="price">{{ room.price | number:'1.0-0' }}</span>
            <span class="period">/noche</span>
          </div>
          
          <div class="room-info">
            <p><strong>Capacidad:</strong> {{ room.capacity }} persona(s)</p>
            <div *ngIf="room.amenities && room.amenities.length > 0" class="amenities">
              <strong>Amenidades:</strong>
              <ul>
                <li *ngFor="let amenity of room.amenities">
                  <span class="amenity-name">{{ amenity.name }}</span>
                  <span class="amenity-desc" *ngIf="amenity.description">- {{ amenity.description }}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="action-buttons">
          <button class="availability-btn" (click)="searchAvailability(room)">
            ğŸ” Buscar Disponibilidad
          </button>
        </div>
      </div>
    </div>

    <div class="empty-message" *ngIf="!isLoading && allRooms.length === 0">
      <p>No hay habitaciones disponibles en este momento.</p>
    </div>
  </section>

  <!-- Modal de disponibilidad -->
  <app-availability-modal 
    *ngIf="showModal && selectedRoom"
    [roomId]="selectedRoom.id"
    [roomName]="selectedRoom.description"
    (close)="closeModal()">
  </app-availability-modal>
</div>
