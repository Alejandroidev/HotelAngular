<div class="available-rooms-page">
  <header class="page-header">
    <h1>Buscar Habitaciones Disponibles</h1>
    <p>Encuentra la habitaciÃ³n perfecta para tus fechas</p>
  </header>

  <section class="search-section">
    <form class="search-form" (ngSubmit)="searchAvailableRooms()">
      <div class="form-field">
        <label for="checkIn">Fecha de Check-in</label>
        <div class="input-wrapper" (click)="openDatePicker('checkIn')">
          <span class="input-icon">ğŸ“…</span>
          <input 
            type="date" 
            id="checkIn" 
            name="checkIn"
            [(ngModel)]="checkIn"
            [min]="minDate"
            (change)="onCheckInChange()"
            required>
        </div>
      </div>

      <div class="form-field">
        <label for="checkOut">Fecha de Check-out</label>
        <div class="input-wrapper" (click)="openDatePicker('checkOut')">
          <span class="input-icon">ğŸ“…</span>
          <input 
            type="date" 
            id="checkOut" 
            name="checkOut"
            [(ngModel)]="checkOut"
            [min]="minCheckOutDate"
            required>
        </div>
      </div>

      <div class="form-field">
        <label for="guests">NÃºmero de HuÃ©spedes</label>
        <div class="input-wrapper">
          <span class="input-icon">ğŸ‘¥</span>
          <input 
            type="number" 
            id="guests" 
            name="guests"
            [(ngModel)]="guests"
            min="1"
            max="10"
            required>
        </div>
      </div>

      <button type="submit" class="search-btn" [disabled]="isLoading">
        <span *ngIf="!isLoading">ğŸ” Buscar</span>
        <span *ngIf="isLoading">Buscando...</span>
      </button>
    </form>

    <div class="error-message" *ngIf="errorMessage">
      âš ï¸ {{ errorMessage }}
    </div>
  </section>

  <section class="results-section" *ngIf="hasSearched">
    <h2>Resultados de BÃºsqueda</h2>
    
    <div class="results-info" *ngIf="!isLoading">
      <p *ngIf="availableRooms.length > 0">
        Se encontraron <strong>{{ availableRooms.length }}</strong> habitaciÃ³n(es) disponible(s)
      </p>
      <p *ngIf="availableRooms.length === 0" class="no-results">
        No se encontraron habitaciones disponibles para las fechas seleccionadas
      </p>
    </div>

    <div class="rooms-grid">
      <div *ngFor="let room of availableRooms" class="room-card" [class.featured]="room.isFeatured">
        <div class="featured-badge" *ngIf="room.isFeatured">
          â­ Destacada
        </div>
        
        <div class="room-image">
          <img 
            [src]="'https://images.unsplash.com/photo-' + getRoomImageId(room.name) + '?w=500&h=350&fit=crop'" 
            [alt]="room.name"
            (error)="onImageError($event)">
        </div>
        
        <div class="room-header">
          <h3>{{ room.name }}</h3>
        </div>
        
        <div class="room-description">
          <p>{{ room.description }}</p>
        </div>
        
        <div class="room-details">
          <div class="price-tag">
            <span class="currency">$</span>
            <span class="price">{{ room.price | number:'1.0-0' }}</span>
            <span class="period">/noche</span>
          </div>
          
          <div class="room-info">
            <p><strong>Capacidad:</strong> {{ room.capacity }} persona(s)</p>
          </div>
        </div>

        <div class="action-buttons">
          <button class="reserve-btn" (click)="reserveRoom(room)">
            âœ“ Reservar
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal de disponibilidad -->
  <app-availability-modal 
    *ngIf="showModal && selectedRoom"
    [roomId]="selectedRoom.id"
    [roomName]="selectedRoom.description"
    [prefilledCheckIn]="checkIn"
    [prefilledCheckOut]="checkOut"
    (close)="closeModal()">
  </app-availability-modal>
</div>
